# GatewayWorker实践，类似于boss直聘聊天，可以对多人通话，有历史记录，新消息提醒
<font size="1"><div>GatewayWorker基于[Workerman](https://github.com/walkor/Workerman)开发的一个项目框架，用于快速开发长连接应用。</div><div><br></div><div>GatewayWorker使用经典的Gateway和Worker进程模型。</div><div>Gateway进程负责维持客户端连接，并转发客户端的数据给Worker进程处理；</div><div>Worker进程负责处理实际的业务逻辑，并将结果推送给对应的客户端。</div><div>Gateway服务和Worker服务可以分开部署在不同的服务器上，实现分布式集群。</div><div><br></div><div>GatewayWorker提供非常方便的API，可以全局广播数据、可以向某个群体广播数据、也可以向某个特定客户端推送数据。</div><div><br></div><div>启动GatewayWorker</div><div>=======</div><div>双击vendor/GatewayWorker/start_for_win.bat</div><div><br></div><div>客户端用户登录，dev/js/fac.js中进行如下操作：</div><div>1.会new WebSocket('ws://127.0.0.1:8484');&nbsp; &nbsp;&nbsp;</div><div>2.发送初始化（onopen）数据，{"type":"init","uid":"' + user1.uid + '"}；</div><div>3.开始监听收到的信息（onmessage）；</div><div>4.也可以发送消息，dev/js/main.js中yssendmsg()，消息包含发送人、接收者的id、消息类型，所有的发送内容在html/chat.html里</div><div><br></div><div>客户端的数据被controller/chat.php处理，结果推送到接收者，流程完成</div></font>
